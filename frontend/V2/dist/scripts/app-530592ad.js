"use strict";angular.module("v2",["v2.home","ngAnimate","ngCookies","ngResource","ui.router","ngMaterial","ngDialog","Backend"]).config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/")}]),angular.module("v2").controller("NewCtrl",["$scope","$log","ngDialog",function(e,t,a){e.datasources=[{name:"File input",datasource:[{name:"File 1",desc:"Example description"},{name:"File 2",desc:"Example description"},{name:"File 3",desc:"Example description"}]},{name:"Database connection",datasource:[{name:"DB1",desc:"Example description"}]},{name:"Table input",datasource:[{name:"Super Table",desc:"Example description"}]}],e.category=[{name:"Unique Column Combinations",algorithms:[{name:"example_holistic_algorithm",desc:"Example description"},{name:"example_relational_input_algorithm",desc:"Example description"},{name:"example_ucc_algorithm",desc:"Example description"}]},{name:"Conditional Unique Column Combinations",algorithms:[{name:"example_cucc_algorithm",desc:"Example description"}]},{name:"Functional Dependencies",algorithms:[{name:"example_cucc_algorithm",desc:"Example description"}]}],e.openAlgorithmSettings=function(){a.open({template:"/assets/settings-algorithm.html",scope:e})},e.openDatasourceSettings=function(){a.open({template:"/assets/settings-datasource.html",scope:e})},e.openNewDatasource=function(){a.open({template:"/assets/new-datasource.html",scope:e})}}]),angular.module("v2.home",["ui.router"]).config(["$stateProvider",function(e){e.state("home",{url:"/",views:{"main@":{controller:"MainCtrl",templateUrl:"app/main/main.html"},"new@home":{controller:"NewCtrl",templateUrl:"app/new/new.html"},"history@home":{controller:"HistoryCtrl",templateUrl:"app/history/history.html"}}})}]).controller("MainCtrl",["$scope","$log",function(e,t){var a=[{title:"New",view:"new"},{title:"History",view:"history"}],n=null,i=null;e.tabs=a,e.selectedIndex=0,e.$watch("selectedIndex",function(e,o){i=n,n=a[e],o&&o!==e&&t.debug("Hide "+i.title+"!"),e&&t.debug("Show "+n.title+"!")}),e.addTab=function(e,t){t=t||e+" Content View",a.push({title:e,content:t,disabled:!1})},e.removeTab=function(e){var t=a.indexOf(e);a.splice(t,1)}}]);var app=angular.module("v2");app.controller("HistoryCtrl",["$scope","$log",function(e){e.toggleSearch=!1,e.headers=[{name:"",field:"thumb"},{name:"Name",field:"name"},{name:"Description",field:"description"},{name:"Last Modified",field:"last_modified"}],e.content=[{thumb:"https://lh3.googleusercontent.com/-5NfcdlvGQhs/AAAAAAAAAAI/AAAAAAAAABY/ibGrApGYTuQ/photo.jpg",name:"Bruno Mars",description:"Human",last_modified:"Jun 5, 2014"},{thumb:"http://www.otakia.com/wp-content/uploads/V_1/article_3573/7405.jpg",name:"AT-AT",description:"Robot",last_modified:"Jun 5, 2014"},{thumb:"https://speakerdata.s3.amazonaws.com/photo/image/774492/Mark-Ronson-r24.jpg",name:"Mark Ronson",description:"Human",last_modified:"Jun 5, 2014"},{thumb:"http://25.media.tumblr.com/61ebf04c3cc7a84944aa0246e902f2a7/tumblr_mm35b87dGz1qmwrnuo1_1280.jpg",name:"Daft Punk",description:"Human-Robot",last_modified:"Jun 5, 2014"},{thumb:"http://thatgrapejuice.net/wp-content/uploads/2014/03/lady-gaga-that-grape-juice-televisionjpg.jpg",name:"Lady Gaga",description:"Undefined",last_modified:"Jun 5, 2014"}],e.custom={name:"bold",description:"grey",last_modified:"grey"},e.sortable=["name","description","last_modified"],e.thumbs="thumb",e.count=3}]),app.directive("mdTable",function(){return{restrict:"E",scope:{headers:"=",content:"=",sortable:"=",filters:"=",customClass:"=customClass",thumbs:"=",count:"="},controller:["$scope","$filter","$window",function(e,t){var a=t("orderBy");e.tablePage=0,e.nbOfPages=function(){return Math.ceil(e.content.length/e.count)},e.handleSort=function(t){return e.sortable.indexOf(t)>-1?!0:!1},e.order=function(t,n){e.content=a(e.content,t,n),e.predicate=t},e.order(e.sortable[0],!1),e.getNumber=function(e){return new Array(e)},e.goToPage=function(t){e.tablePage=t}}],template:angular.element(document.querySelector("#md-table-template")).html()}}),app.directive("mdColresize",["$timeout",function(e){return{restrict:"A",link:function(t,a){t.$evalAsync(function(){e(function(){$(a).colResizable({liveDrag:!0,fixed:!0})},100)})}}}]),app.filter("startFrom",function(){return function(e,t){return t=+t,e.slice(t)}}),angular.module("Backend.algorithms",["ngResource"]).factory("Algorithms",["$resource",function(e){return e("/rest/pub/:action/",{},{isUsernameAvailable:{method:"GET",params:{action:"isUsernameAvailable",username:"@value"},isArray:!1}})}]),angular.module("v2").run(["$templateCache",function(e){e.put("app/history/history.html",'<div class="resultsTable"><md-content layout="column" flex="flex" ng-click="toggleSearch=false"><md-table headers="headers" content="content" sortable="sortable" filters="search" custom-class="custom" thumbs="thumbs" count="count"></md-table></md-content><div id="md-table-template" ng-hide="true"><table md-colresize="md-colresize" class="md-table"><thead><tr class="md-table-headers-row"><th ng-repeat="h in headers" class="md-table-header"><a href="#" ng-if="handleSort(h.field)" ng-click="reverse=!reverse;order(h.field,reverse)">{{h.name}} <i ng-show="reverse &amp;&amp; h.field == predicate" class="ion-android-arrow-dropup"></i><i ng-show="!reverse &amp;&amp; h.field == predicate" class="ion-android-arrow-dropdown"></i></a><span ng-if="!handleSort(h.field)">{{h.name}}</span></th><th class="md-table-header"></th></tr></thead><tbody><tr ng-repeat="c in content | filter:filters | startFrom:tablePage*count | limitTo: count" class="md-table-content-row"><td><div ng-repeat="h in headers" ng-if="h.field == thumbs" class="md-table-thumbs"><div style="background-image:url({{c.thumb}})"></div></div></td><td ng-repeat="h in headers" ng-class="customClass[h.field]" ng-if="h.field != thumbs" class="md-table-content">{{(h.field.indexOf(\'date\') > 0) ? $filter(\'date\')(c[h.field]) : c[h.field];}}</td><td class="md-table-td-more"><md-button aria-label="Info"><i class="ion-android-more-vertical"></i></md-button></td></tr></tbody></table><div layout="row" class="md-table-footer"><span class="md-table-count-info">Rows per page : <a href="#" ng-click="goToPage(0); count=10">10</a>,<a href="#" ng-click="goToPage(0); count=25">25</a>,<a href="#" ng-click="goToPage(0); count=50">50</a>,<a href="#" ng-click="goToPage(0); count=100">100</a>(current is {{count}})</span><span flex="flex"></span><span ng-show="nbOfPages() &gt; 1"><md-button ng-disabled="tablePage==0" ng-click="tablePage=tablePage-1" aria-label="Previous Page" class="md-primary md-hue-2"><i style="font-size:16px;" class="ion-chevron-left"></i></md-button><a href="#" ng-repeat="i in getNumber(nbOfPages()) track by $index"><md-button ng-click="goToPage($index)" class="md-primary md-hue-2 md-table-footer-item"><span ng-class="{ \'md-table-active-page\': tablePage==$index}">{{$index+1}}</span></md-button></a><md-button ng-disabled="tablePage==nbOfPages()-1" ng-click="tablePage=tablePage+1" aria-label="Next Page" class="md-primary md-hue-2"><i style="font-size:16px;" class="ion-chevron-right"></i></md-button></span></div></div></div>'),e.put("app/main/main.html",'<div class="main-container"><div layout="column" layout-fill=""><img class="metanome-logo" src="/assets/images/logo.png"><md-content class="md-padding"><md-tabs md-selected="selectedIndex" md-border-bottom=""><md-tab ng-repeat="tab in tabs" label="{{tab.title}}"><div class="metanome-tab tab{{$index%4}}" style="padding: 25px;"><div ui-view="{{tab.view}}"></div></div></md-tab></md-tabs></md-content></div></div>'),e.put("app/new/new.html",'<div class="new-controller"><div layout="row" layout-wrap=""><div flex="50"><md-card><md-card-content><h2>Choose algorithm</h2><a class="settings-algorithm" ng-click="openAlgorithmSettings()"><i class="fa fa-cog fa-2x"></i></a><div class="algorithms-container"><md-list><div ng-repeat="algorithms in category"><md-subheader class="md-no-sticky" ng-bind="algorithms.name"></md-subheader><md-list-item class="md-2-line" ng-repeat="item in algorithms.algorithms"><div class="algo-in-list md-list-item-text"><h4>{{ item.name }}</h4><p class="algo-desc">{{ item.desc }}</p></div></md-list-item><md-divider></md-divider></div></md-list></div></md-card-content></md-card></div><div flex="50"><md-card><md-card-content><h2>Select datasource</h2><a class="settings-datasources" ng-click="openDatasourceSettings()"><i class="fa fa-cog fa-2x"></i></a><div class="datasources-container"><md-list><div ng-repeat="datasource in datasources"><md-subheader class="md-no-sticky" ng-bind="datasource.name"></md-subheader><md-list-item class="md-2-line" ng-repeat="item in datasource.datasource"><md-checkbox md-no-ink="" aria-label="Checkbox No Ink" ng-model="data.cb5" class="md-primary"><div class="algo-in-list md-list-item-text"><h4>{{ item.name }} ({{ item.desc }})</h4></div></md-checkbox></md-list-item><md-divider></md-divider></div></md-list></div></md-card-content></md-card></div><div flex="100"><md-card><md-card-content><h2>Additional configuration</h2></md-card-content></md-card></div></div></div>')}]);